<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Στατιστικά Διπλωματικών</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/TeacherStats.css">
</head>
<body>

<div class="container-fluid">
  <div class="row flex-nowrap">
    <!-- Sidebar -->
    <div class="col-auto col-md-3 col-xl-2 px-sm-2 px-0 sidebar collapse d-md-block" id="sidebarMenu">
      <div class="sidebar-container">
        
        <!-- Profile pic -->
        <img src="icons/account.png" alt="Profile" class="profile-avatar" onclick="window.location.href='profile.html'">
        
        <!-- User name link -->
        <div class="user-name">
          Βαλια Παναγοπουλου
        </div>
        
        <!-- Name separator -->
        <div class="name-separator"></div>

        <ul class="nav nav-pills flex-column mb-auto w-100">
          <li class="nav-item nav-spacing">
            <a href="TeacherDashboard.html">
              <img src="icons/menu.png" alt="Dashboard" class="nav-icon">
              Dashboard
            </a>
          </li>
          <li class="nav-spacing">
            <a href="TeacherStats.html" class="active">
              <img src="icons/stats.png" alt="Statistics" class="nav-icon">
              Στατιστικα
            </a>
          </li>
          <li class="nav-spacing">
            <a href="TeacherCreateThesis.html">
              <img src="icons/file.png" alt="Thesis Topics" class="nav-icon">
              Θεματα ΔΕ
            </a>
          </li>
          <li class="nav-spacing">
            <a href="TeacherThesisList.html">
              <img src="list.png" alt="Thesis List" class="nav-icon">
              Λιστα ΔΕ
            </a>
          </li>
          <li class="nav-spacing">
            <a href="TeacherInvites.html">
              <img src="icons/invitation.png" alt="Invitations" class="nav-icon">
              Προσκλησεις
            </a>
          </li>
          
          <div class="nav-separator"></div>
          
          <li class="nav-spacing">
            <a href="settings.html">
              <img src="icons/setting.png" alt="Settings" class="nav-icon">
              Ρυθμισεις
            </a>
          </li>
          <li class="nav-spacing">
            <a href="logout.html" class="logout">
              <img src="icons/logout.png" alt="Logout" class="nav-icon">
              Αποσυνδεση
            </a>
          </li>
        </ul>
      </div>
    </div>

    <!-- Main Content -->
    <div class="col py-3">
      <!-- Mobile toggle button -->
      <button class="mobile-menu-btn d-md-none" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu">
        <i class="fas fa-bars"></i> Μενού
      </button>

      <!-- Statistics Content -->
      <div class="container">
        <header class="header">
            <div class="header-title"><b>Στατιστικά Διπλωματικών</b></div>
        </header>
        <hr class="hr">
        <main>
            <div class="stats-column spaced-cards">
                <div class="stat-card">
                    <div class="stat-card-title">Μεσος Χρονος Περατωσης</div>
                    <div class="chart-container">
                        <canvas id="completionTimeChart"></canvas>
                    </div>
                    <div class="legend legend-centered">
                        <div class="legend-item" data-index="0"><span class="legend-color legend-pink"></span> Επιβλεπων</div>
                        <div class="legend-item" data-index="1"><span class="legend-color legend-blue"></span> Τριμελης</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-title">Μεσος Βαθμος</div>
                    <div class="chart-container">
                        <canvas id="gradeChart"></canvas>
                    </div>
                    <div class="legend legend-centered">
                        <div class="legend-item" data-index="0"><span class="legend-color legend-pink"></span> Επιβλεπων</div>
                        <div class="legend-item" data-index="1"><span class="legend-color legend-blue"></span> Τριμελης</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-title">Συνολικο Πληθος</div>
                    <div class="chart-container">
                        <canvas id="totalThesesChart"></canvas>
                    </div>
                    <div class="legend legend-centered">
                        <div class="legend-item" data-index="0"><span class="legend-color legend-pink"></span> Επιβλεπων</div>
                        <div class="legend-item" data-index="1"><span class="legend-color legend-blue"></span> Τριμελης</div>
                    </div>
                </div>
            </div>
        </main>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Chart.js code
  const completionTimeData = {
      labels: ['Επιβλεπων', 'Τριμελης'],
      datasets: [{
          label: 'Μέσος Χρόνος (μήνες)',
          data: [15, 13],
          backgroundColor: ['#8fbc8f', '#6a7a8c'],
          borderColor: ['#8fbc8f', '#6a7a8c'],
          borderWidth: 1,
          maxBarThickness: 28
      }]
  };
  const gradeData = {
      labels: ['Επιβλεπων', 'Τριμελης'],
      datasets: [{
          label: 'Μέσος Βαθμός',
          data: [8, 5],
          backgroundColor: ['#8fbc8f', '#6a7a8c'],
          borderColor: ['#8fbc8f', '#6a7a8c'],
          borderWidth: 1,
          maxBarThickness: 28
      }]
  };
  const totalThesesData = {
      labels: ['Επιβλεπων', 'Τριμελης'],
      datasets: [{
          label: 'Πλήθος Διπλωματικών',
          data: [9, 11],
          backgroundColor: ['#8fbc8f', '#6a7a8c'],
          borderColor: ['#8fbc8f', '#6a7a8c'],
          borderWidth: 1,
          maxBarThickness: 28
      }]
  };
  const chartConfig = {
      type: 'bar',
      options: {
          indexAxis: 'y',
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
              legend: { display: false }
          },
          animation: {
              duration: 300
          },
          scales: {
              x: {
                  beginAtZero: true,
                  grid: { color: '#e0e7ef' },
                  ticks: { color: '#222' }
              },
              y: {
                  grid: { display: false },
                  ticks: { display: false }
              }
          }
      }
  };
  const completionTimeChart = new Chart(
      document.getElementById('completionTimeChart'),
      { ...chartConfig, data: completionTimeData }
  );
  const gradeChart = new Chart(
      document.getElementById('gradeChart'),
      { ...chartConfig, data: gradeData }
  );
  const totalThesesChart = new Chart(
      document.getElementById('totalThesesChart'),
      { ...chartConfig, data: totalThesesData }
  );

  // --- Legend hover effect ---
  function addLegendHoverEffect(legendSelector, chart, colorActive, colorInactive, borderActive, borderInactive) {
      const legend = legendSelector;
      if (!legend) return;
      const items = legend.querySelectorAll('.legend-item');
      items.forEach((item, idx) => {
          item.addEventListener('mouseenter', () => {
              chart.data.datasets[0].backgroundColor = chart.data.datasets[0].backgroundColor.map((c, i) =>
                  i === idx ? colorActive[i] : colorInactive[i]
              );
              chart.data.datasets[0].borderColor = chart.data.datasets[0].borderColor.map((c, i) =>
                  i === idx ? borderActive[i] : borderInactive[i]
              );
              chart.update();
          });
          item.addEventListener('mouseleave', () => {
              chart.data.datasets[0].backgroundColor = colorActive;
              chart.data.datasets[0].borderColor = borderActive;
              chart.update();
          });
      });
  }
  // Colors for active/inactive
  const sageGreen = '#8fbc8f', dustyBlue = '#6a7a8c';
  const sageGreenFaded = 'rgba(143, 188, 143, 0.5)', dustyBlueFaded = 'rgba(106, 122, 140, 0.5)';
  // Add effect for each chart
  addLegendHoverEffect(
      document.querySelectorAll('.legend-centered')[0],
      completionTimeChart,
      [sageGreen, dustyBlue],
      [sageGreenFaded, dustyBlueFaded],
      [sageGreen, dustyBlue],
      [sageGreenFaded, dustyBlueFaded]
  );
  addLegendHoverEffect(
      document.querySelectorAll('.legend-centered')[1],
      gradeChart,
      [sageGreen, dustyBlue],
      [sageGreenFaded, dustyBlueFaded],
      [sageGreen, dustyBlue],
      [sageGreenFaded, dustyBlueFaded]
  );
  addLegendHoverEffect(
      document.querySelectorAll('.legend-centered')[2],
      totalThesesChart,
      [sageGreen, dustyBlue],
      [sageGreenFaded, dustyBlueFaded],
      [sageGreen, dustyBlue],
      [sageGreenFaded, dustyBlueFaded]
  );

  // Mobile menu toggle
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
    const sidebar = document.querySelector('.sidebar');
    
    if (mobileMenuBtn) {
      mobileMenuBtn.addEventListener('click', function() {
        sidebar.classList.toggle('show');
      });
    }
  });
</script>
</body>
</html> 